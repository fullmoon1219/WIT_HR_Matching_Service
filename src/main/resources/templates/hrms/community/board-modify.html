<!-- /templates/hrms/community/board-modify.html -->


<div class="write-container">
    <input type="hidden" id="postId" th:value="${postId}" />
    <div class="write-header">
        <span class="write-title">✍️ 게시물 수정</span>
        <br>
        <span class="write-description" id="board-description" th:text="${description}"></span>
        <br>
        <span class="write-description">게시판에 자유롭게 의견을 남겨주세요.</span>
    </div>

    <div class="write-content">
        <form action="#" method="post" enctype="multipart/form-data">

            <div class="form-group">
                <label for="board" class="form-label-inline">게시판 선택</label>
                <select id="board" name="boardId" required class="form-select-inline">
                    <option th:each="board : ${communityBoards}"
                            th:value="${board.id}"
                            th:text="${board.name}"
                            th:selected="${board.code?.toString() == boardCode?.toString()}">
                    </option>
                </select>
            </div>

            <div class="form-group">
                <label for="title">제목</label>
                <input type="text" id="title" name="title" placeholder="제목을 입력하세요" required>
            </div>

            <div class="form-group">
                <label for="editor">내용</label>
                <div id="editor"></div>
                <!-- 실제 form 전송용 hidden 필드 -->
                <input type="hidden" name="content" id="content">
            </div>

            <div class="form-group">
                <label for="file">첨부파일</label>
                <input type="file" id="file" name="files" multiple>
                <ul id="selectedFileList" class="file-preview-list"></ul>
                <ul id="existingFileList" class="file-preview-list"></ul>
            </div>


            <div class="form-buttons">
                <button type="submit" class="submit-btn">등록</button>
                <a href="javascript:void(0)" class="cancel-btn" id="cancelModify">취소</a>
            </div>
        </form>
    </div>
</div>
<script src="/js/community/board-modify.js"></script>
<script th:inline="javascript">
    if (typeof boardMap === 'undefined') {
        var boardMap = {};
    }

    var communityBoards = /*[[${communityBoards}]]*/ [];
    if (Array.isArray(communityBoards)) {
        communityBoards.forEach(board => {
            boardMap[board.id] = {
                name: board.name,
                description: board.description
            };
        });
    } else {
        console.warn("⚠ communityBoards가 배열이 아님");
    }
</script>

