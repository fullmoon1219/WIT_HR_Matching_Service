<div layout:decorate="~{layout/main/main-template}" xmlns:layout="http://www.w3.org/1999/xhtml">

    <th:block layout:fragment="styles">
        <link rel="stylesheet" th:href="@{/css/main/main.css}">
    </th:block>

    <section layout:fragment="content">

        <!-- 메일 인증 안내 -->
        <div class="info-banner" th:if="${userDetails != null and !userDetails.emailVerified}">
            <div class="banner-text">
                <span class="icon">&#x2139;</span>
                메일 인증이 필요한 사용자입니다.
                <span id="resendEmailBtn" class="resend-link" th:data-email="${userDetails.email}">메일 재전송</span>
            </div>
        </div>

        <section class="main-section">

            <!-- 1. 상단 배너 영역 -->
            <div class="top-banner">
                <a href="/community/study"><img src="/images/ad_novi.png" alt="배너1"></a>
            </div>

            <!-- 2. 콘텐츠 영역 -->
            <div class="content-container">

                <!-- 공고 카드 그리드: 랜덤 3개 AJAX로 삽입 -->
                <div class="card-grid">
                    <div class="image-card">
                        <img src="/images/today-banner.png" alt="합격축하금 배너">
                    </div>
                    <!-- 랜덤 공고가 AJAX로 여기에 추가됨 -->
                </div>
            </div>
        </section>


        <!-- 슬라이드 배너 -->
        <section id="banner" class="slider-section">
            <div class="slider-container">
                <button class="slide-btn prev" onclick="changeSlide(-1)">&#10094;</button>
                <div class="slide-wrapper">
                    <a href="/recruit/list?sortOrder=views" class="slide-link active"><img src="/images/clickbanner.png" alt="배너1"></a>
                    <a href="/recruit/list?sortOrder=scraps" class="slide-link"><img src="/images/bmarkbanner.png" alt="배너2"></a>
                    <a href="/applicant/resume/list" class="slide-link"><img src="/images/writebanner.png" alt="배너3"></a>
                </div>
                <button class="slide-btn next" onclick="changeSlide(1)">&#10095;</button>
                <div class="slide-indicator">
                    <span class="dot active"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                </div>
            </div>
        </section>

        <!-- 광고 영역 -->
        <section th:replace="~{fragments/main/ad_banner:: ad}"></section>

        <!-- 마감 임박 공고 -->
        <section id="urgent" class="urgent-section">
            <h2 class="urgent-title">마감 임박</h2>
            <div class="urgent-divider"></div>
            <div class="urgent-card-grid">
                <!-- 마감 임박 공고가 AJAX로 삽입됨 -->
            </div>
            <div id="paginationContainerUrgent" class="paginate_regular"></div>
        </section>

        <!-- 우측 네비게이션 -->
        <div class="section-nav">
            <a href="#header" class="nav-link">TOP</a>
            <a href="#banner" class="nav-link">배너</a>
            <a href="#urgent" class="nav-link">마감임박</a>
            <a href="#footer" class="nav-link">BOTTOM</a>
        </div>

    </section>


</div>

<script src="/js/jquery-3.7.1.min.js"></script>
<script src="/js/main/right-nav.js"></script>
<script src="/js/main/banner-slider.js"></script>
<script src="/js/main/header.js"></script>
<script src="/js/main/index.js"></script>
<script src="/js/csrf-setup.js"></script>
<script src="/js/community/pagination.js"></script>
<script src="/js/main/job-loader.js"></script>