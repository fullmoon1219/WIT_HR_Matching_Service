<!-- fragments/header.html -->

<header th:fragment="header" id="header" class="header-container menu-nav">
    <div class="logo">
        <a th:href="@{/}">
            <img th:src="@{/images/logo.png}" alt="로고 이미지">
        </a>
    </div>

    <div class="right-section" style="display: flex; align-items: center; gap: 30px;">
        <div class="menu-wrapper">
            <ul>
                <li class="dropdown">
                    <a th:href="@{/recruit/list}">채용정보</a>
                    <ul class="submenu">
                        <li><a href="#">메뉴1</a></li>
                        <li><a href="#">메뉴2</a></li>
                        <li><a href="#">메뉴3</a></li>
                        <li><a href="#">메뉴4</a></li>
                        <li><a href="#">메뉴5</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a th:href="@{/interview}">모의면접</a>
                </li>
                <li class="dropdown">
                    <a th:href="@{/community/all}">커뮤니티</a>
                    <ul class="submenu">
                        <li><a th:href="@{/community/all}">전체 게시판</a></li>
                        <li><a th:href="@{/community/free}">자유 게시판</a></li>
                        <li><a th:href="@{/community/qna}">Q&A 게시판</a></li>
                        <li><a th:href="@{/community/study}">스터디 게시판</a></li>
                        <li><a th:href="@{/community/feddback}">피드백 게시판</a></li>
                        <li><a th:href="@{/community/jobshare}">채용 정보 게시판</a></li>
                    </ul>
                </li>
            </ul>
        </div>

        <!-- 로그인 상태일 때 -->
        <div class="header-auth" id="profileArea" th:if="${userDetails != null}"
             style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
            <img th:if="${userDetails.profileImage != null}"
                 th:src="@{'/uploads/users/profile/' + ${userDetails.profileImage}}"
                 alt="프로필 이미지"
                 style="width: 36px; height: 36px; border-radius: 50%; object-fit: cover;">
            <img th:if="${userDetails.profileImage == null}"
                 th:src="@{/images/users/user_small_profile.png}"
                 alt="기본 이미지"
                 style="width: 36px; height: 36px; border-radius: 50%; object-fit: cover;">
            <div style="display: flex; flex-direction: column;">
                <span th:text="${userDetails.name}">사용자 이름</span>
                <small th:text="${userDetails.email}" style="font-size: 12px;">이메일</small>
            </div>
            <span class="divider">|</span>
            <a th:href="@{/users/logout}" style="font-weight: bold;">로그아웃</a>

            <!-- ✅ 숨겨진 사용자 역할 -->
            <input type="hidden" id="userRole" th:value="${userDetails.role}">
        </div>

        <!-- 비로그인 상태일 때 -->
        <div class="header-auth" th:if="${userDetails == null}">
            <a th:href="@{/users/login}">로그인</a>
            <span class="divider">|</span>
            <a th:href="@{/users/register}">회원가입</a>
        </div>
    </div>
</header>
