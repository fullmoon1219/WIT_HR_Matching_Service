<!-- fragments/community/header.html -->

<header th:fragment="header" id="header" class="header-container menu-nav">
    <div class="title">
        <span>커뮤니티</span>
    </div>

    <div class="right-section" style="display: flex; align-items: center; gap: 30px;">
        <div class="menu-wrapper">
            <ul>
                <li class="dropdown">
                    <a th:href="@{/jobs}">채용정보</a>
                    <ul class="submenu">
                        <li><a href="/recruit/list?region=서울&region=경기&region=인천">수도권</a></li>
                        <li><a href="/recruit/list?region=강원">강원권</a></li>
                        <li><a href="/recruit/list?region=충북&region=충남&region=세종&region=대전">충청권</a></li>
                        <li><a href="/recruit/list?region=전북&region=전남&region=광주">전라권</a></li>
                        <li><a href="/recruit/list?region=경북&region=경남&region=대구&region=부산&region=울산">경상권</a></li>
                        <li><a href="/recruit/list?region=제주">제주권</a></li>
<!--                        <li><a href="/recruit/list?sortOrder=views">조회수 Top</a></li>-->
<!--                        <li><a href="/recruit/list?sortOrder=scraps">북마크 Top</a></li>-->
                    </ul>
                </li>
                <li class="dropdown">
                    <a th:href="@{/interview}">모의면접</a>
                </li>
                <li class="dropdown">
                    <a th:href="@{/community/all}">커뮤니티</a>
                    <ul class="submenu">
                        <li><a th:href="@{/community/all}">전체 게시판</a></li>
                        <li><a th:href="@{/community/free}">자유 게시판</a></li>
                        <li><a th:href="@{/community/qna}">Q&A 게시판</a></li>
                        <li><a th:href="@{/community/study}">스터디 게시판</a></li>
                        <li><a th:href="@{/community/feddback}">피드백 게시판</a></li>
                        <li><a th:href="@{/community/jobshare}">채용 정보 게시판</a></li>
                    </ul>
                </li>
            </ul>
        </div>
        <!-- 로그인 상태일 때 -->
        <div class="header-auth" id="profileArea" th:if="${userDetails != null}"
             style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
            <img th:if="${userDetails.profileImage != null}"
                 th:src="@{'/uploads/users/profile/' + ${userDetails.profileImage}}"
                 alt="프로필 이미지"
                 style="width: 36px; height: 36px; border-radius: 50%; object-fit: cover;">
            <img th:if="${userDetails.profileImage == null}"
                 th:src="@{/images/users/user_small_profile.png}"
                 alt="기본 이미지"
                 style="width: 36px; height: 36px; border-radius: 50%; object-fit: cover;">
            <div style="display: flex; flex-direction: column;">
                <span th:text="${userDetails.name}">사용자 이름</span>
                <small th:text="${userDetails.email}" style="font-size: 12px;">이메일</small>
            </div>
            <span class="divider">|</span>
            <a th:href="@{/users/logout}" style="font-weight: bold;">로그아웃</a>

            <!-- ✅ 숨겨진 사용자 역할 -->
            <input type="hidden" id="userRole" th:value="${userDetails.role}">
        </div>

        <!-- 비로그인 상태일 때 -->
        <div class="header-auth" th:if="${userDetails == null}">
            <a th:href="@{/users/login}">로그인</a>
            <span class="divider">|</span>
            <a th:href="@{/users/register}">회원가입</a>
        </div>
    </div>
</header>
